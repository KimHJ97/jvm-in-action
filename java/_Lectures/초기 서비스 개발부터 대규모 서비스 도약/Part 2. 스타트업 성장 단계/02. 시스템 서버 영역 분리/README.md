# 서비스 운영 영역 분리

각 목적에 따라 시스템 환경을 별도로 구성하여 독립성, 보안성, 안전성, 유지보수성 등 다양한 이점을 얻을 수 있다.  
 - 개발자가 서비스를 개발하기 위한 환경, 팀의 테스트를 위한 환경, 고객에게 서비스를 제공하기 위한 환경 등으로 분리한다.
    - local: 개발자가 서비스를 개발하기 위한 환경
    - dev: 개발자가 팀 또는 다른 팀과 통합 테스트를 위해 필요한 환경
    - qa: QA 조직이 있는 경우 QA를 할 수 있는 환경
    - stage: 고객은 접속할 수 없는 실서비스 환경
    - prod: 고객에게 서비스를 제공하는 환경

<br/>

## Local Zone (로컬 환경)

개발자가 서비스를 개발하기 위해 자신의 PC 또는 노트북을 이용한다.  
이 개발자의 PC나 노트북의 개발 환경을 Local 또는 Local Zone이라고 한다.  
 - 로컬 환경을 쉽고, 빠르게 구축하기 위해서 Docker를 이용할 수 있다.

<br/>

## Dev Zone (개발 환경)

팀에서 관리하는 서비스나 시스템의 개발 환경을 말한다.  
 - 팀 또는 서비스의 원격 코드 저장소, 빌드 및 배포(CI/CD), 외부에서 접근 불가능한 시스템 환경
 - 개발 환경 구축시 프로젝트에 초기화하는 코드를 넣지 않는다.
    - 데이터베이스(ddl-auto), 레디스, 카프카 등
 - 코드 리뷰, 정적 분석, 테스트 등이 실행되도록 한다.
    - Push 이벤트 발생시 실행되는 자동화

<br/>

## Staging Zone (고객에게 노출되지 않는 프로덕션 환경)

스테이지 환경은 실제 고객에게 서비스하는 프로덕션 환경과 동일하지만, 실제 고객에게 서비스 되지는 않는다.  
최종 확인의 목적으로 별도로 프로덕션과 동일하게 사용하는 환경으로 QA 팀에서 QA 용으로도 활용 가능하다.  
 - 외부에서 접근 불가능, 내부에서는 접근 가능한 서비스 및 시스템, 실제 고객이 사용하는 데이터와 동일한 데이터를 사용할 수 있다.
 - 실서비스용 애플리케이션을 빌드 및 패키징한다. (외부 고객에는 노출되지 않고, 실제 고객이 사용하는 데이터와 동일)
 - Stage-Zone 환경 고려할 점
    - 실서비스와 별도로 Stage 데이터베이스를 운영할 것인가?
    - 실서비스와 별도로 Stage 플랫폼을 운영할 것인가?
        - 카프카, 레디스, 검색엔진 등 동기화 이슈 확인
 - Stage-Zone 환경 적정 아키텍처 도입
    - Stage 존에 모든 시스템을 마련하는 것은 현실적으로 어렵다. (비용과 운영)
    - 자주 배포되는 시스템만 Stage 존에 포함한다. (Web/API)
    - 영구적인 형태의 시스템은 기존 Production 존을 사용한다. (DB, 카프카, 레디스)

<br/>

## Production Zone (운영 환경)

고객에게 실제 서비스를 제공하는 환경을 말한다.  
 - 외부에 노출은 최소한으로 구성하고, 외부 공격에 대비하여야 한다.
    - DNS, 방화벽, 로드 밸런서, DMZ, API Gateway
    - 방어용 제품: 아카마이, AWS WAF 등
 - Production 존을 사용할 때 내부용과 외부용을 분리한다.
    - 도메인 분리
        - 내부 도메인과 외부 도메인을 별도로 구분한다. (어드민, 사용자)
    - 코드베이스 분리
        - 내부용 서비스 코드 베이스와 외부 서비스용 코드 베이스를 분리한다. (소스 코드 프로젝트를 서로 분리)
